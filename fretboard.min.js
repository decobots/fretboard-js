!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.Fretboard=r():t.Fretboard=r()}(self,(()=>{return t={734:(t,r,e)=>{var n=e(890),o=e(23),i=e(414);function s(){this.root,this.color}t.exports=s,s.prototype.isHarmonySymbol=!0,s.prototype.__defineGetter__("colorProfile",(function(){if(null!=this._colorProfile)return this._colorProfile.slice();if(null==this.colorRef[this.color])throw"unknown color! '"+this.color+"'\n";return this.colorRef[this.color].slice()})),s.prototype.__defineSetter__("colorProfile",(function(t){this._colorProfile=t})),s.prototype.__defineGetter__("colorProfileAsPitchClasses",(function(){var t=this.colorProfile;for(var r in t)t[r]=n.pc(t[r]);return t.sort((function(t,r){return t-r}))})),s.prototype.__defineGetter__("octaveProfile",(function(){var t=this.colorProfile,r=[];for(var e in t)r.push(n.pc(t[e]+this.root));return r.sort((function(t,r){return t-r}))})),s.prototype.colorRef={},s.prototype.degreeToP=function(t){var r=0;if("string"==typeof t){var e=i.parse(t);t=e.degree,e.accidental&&(r=e.accidental)}var o=this.colorProfileAsPitchClasses,s=n.octave(t,o.length);return t-=s*o.length,p=t%1==0?this.root+o[t]+12*s:this.degreeToP(Math.floor(t))*(1-t%1)+this.degreeToP(Math.ceil(t))*(t%1)+12*s,p+=r,p},s.prototype.pToDegree=function(t){t-=this.root;var r=this.colorProfileAsPitchClasses,e=n.octave(t)*r.length,o=n.pc(t);r.push(12);for(var i=0;i<r.length;i++){if(r[i]==o)return i+e;if(r[i]>o)return e+i-1+(o-r[i-1])/(r[i]-r[i-1])}},s.prototype.degreeShift=function(t,r){var e=this.pToDegree(t);return r>0?e=Math.floor(e):r<0?e=Math.ceil(e):0==r&&(e=Math.round(e)),e+=r,this.degreeToP(e)},s.prototype.containsPitchClasses=function(t){if(null==t)return!1;t.constructor==Number&&(t=[t]);var r=this.octaveProfile;for(var e in t)if(-1==r.indexOf(t[e]))return!1;return!0},s.prototype.checkPitch=function(t){return this.containsPitchClasses(n.pc(t))},s.prototype.pitchSetInRange=function(t,r,e){var n=this.pitchesInRange(t,r,e),i=new o;for(var s in n)i.increment(listp[s]);return i},s.prototype.pitchesInRange=function(t,r,e){for(var n,o=this.octaveProfile,i=Math.floor(t/12),s=Math.ceil(r/12),l=[],f=i;f<=s;f++)for(var a in o){if((n=o[a]+12*f)>r||n==r&&!e)return l;n>=t&&l.push(n)}return l}},42:(t,r,e)=>{var n=e(734);const o=e(448),i=e(890);function s(t){n.call(this),this.root=0,this.color="major",null!=t&&t.constructor==s?(this.root=t.root,this.color=t.color):null!=t&&t.constructor==String&&(this.print=t)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,t.exports=s,s.prototype.isScale=!0,s.prototype.__defineGetter__("print",(function(){var t=i.printPitchClass(this.root);if("major"==this.color)return t+":";if("minor"==this.color){var r=t.charAt(0).toLowerCase();return t.length>=2&&(r+=t.charAt(1)),r+":"}return"chromatic"==this.color?t+"*:":void 0})),s.prototype.__defineSetter__("print",(function(t){this.root=i.parsePitchClass(t),t.charAt(0).match(/[A-G]/)?this.color="major":t.charAt(0).match(/[a-g]/)?this.color="minor":"*"==t.charAt(t.length-2)?this.color="chromatic":this.color=void 0})),s.prototype.colorRef={major:[0,2,4,5,7,9,11],minor:[0,2,3,5,7,8,10],chromatic:[0,1,2,3,4,5,6,7,8,9,10,11]},s.prototype.numerals=["I","II","III","IV","V","VI","VII"],s.prototype.pToNumeral=function(t){for(var r=i.pc(t-this.root),e=this.colorProfile,n=0;n<e.length;n++)if(e[n]==r)return this.numerals[n];for(n=0;n<e.length;n++)if(e[n]-1==r)return"b"+this.numerals[n];for(n=0;n<e.length;n++)if(e[n]+1==r)return"#"+this.numerals[n]},s.prototype.numeralToChord=function(t){if(t.constructor==String){var r=t.match(/[b#]?[VIvi]+/)[0],e=t.slice(r.length);if(e.charAt(e.length-1).match(/[a-g]/)){var n=e.charCodeAt(e.length-1)-97;e=e.slice(0,e.length-1)}else n=0;r.match(/[vi]/)&&null!=o.prototype.colorRef["m"+e]&&(e="m"+e),r=this.degreeToP(r);var s=new o;return s.root=i.pc(r),s.color=e,s.bass=i.pc(s.colorProfile[n]+s.root),s}},s.prototype.chordToNumeral=function(t){if(null!=t&&(t.constructor==String&&(t=new o(t)),t.constructor==o)){var r,e=this.pToNumeral(t.root),n=t.color,i="";return-1!=t.colorProfile.indexOf(3)&&("m"==n.charAt(0)&&(n=n.slice(1)),e=e.toLowerCase()),null!=t.bass&&(r=t.inversion)>0&&(i=String.fromCharCode(r+97)),e+n+i}},s.prototype.randomise=function(){return this.root=Math.floor(12*Math.random()),this.color=Math.random()<=.75?"major":"minor",this},s.random=function(){return(new s).randomise()},s.randomMajor=function(){var t=(new s).randomise();return t.color="major",t},s.parseScale=function(t){if(-1!=t.indexOf(": "))return new s(t.slice(0,t.indexOf(": ")))},s.parseChordOrScale=function(t){return-1==t.indexOf(":")?new o(t):new s(t)},s.all=function(){for(var t=[],r=0;r<12;r++){var e=new s;e.root=r,e.color="major",t.push(e);var n=new s;n.root=r,n.color="minor",t.push(n)}return t},s.guessFromOctaveProfileStatistics=function(t){var r,e=s.all(),n=0;for(var o in e){var i=e[o],l=i.octaveProfile,f=0,a=0;for(var o in l)t[c=l[o]]||f++,a+=t[c]||0;var u=0;for(var c in t)-1==l.indexOf(parseFloat(c))&&(u+=t[c]);var h=(a-u)*(1-f/l.length);h>n&&(n=h,r=i)}return r},s.guess=function(t){if(t){var r=t.octaveProfileStatistics;return r?s.guessFromOctaveProfileStatistics(r):s.guessFromOctaveProfileStatistics(t)}}},23:t=>{function r(t){if(this.items=new Object,null!=t&&t.constructor==r)for(var e in t.items)this.increment(e,t.items[e]);else if(null!=t&&t.constructor==Array)for(var e in t)this.increment(t[e])}r.prototype.increment=function(t,r){if(null!=t&&t.constructor==Array){for(var e in t)this.increment(t[e],r);return this}return null==r&&(r=1),null==this.items[t]&&(this.items[t]=0),this.items[t]+=r,this},r.prototype.flatten=function(t){for(var r in null==t&&(t=1),this.items)0!=this.items[r]?this.items[r]=t:delete this.items[r]},r.prototype.multiply=function(t){for(var r in this.items)this.items[r].weight*=t;return this},r.prototype.normalise=function(){return this.pSum=1,this},r.prototype.addSet=function(t){for(var r in t.items)this.increment(r,t.items[r])},r.prototype.transform=function(t){var e=new r,n=Array.prototype.slice.call(arguments);for(var o in this.items){n[0]=o;var i=t.apply(null,n);e.increment(i,this.items[o])}return e},r.prototype.findOverlapWith=function(t){var e=new r;for(var n in t.items){var o=this.pOfValue(n)*t.items[n];o>0&&e.increment(n,o)}return e},r.prototype.pOfValue=function(t){return null!=this.items[t]?this.items[t]:0},r.prototype.__defineGetter__("itemsAsArray",(function(){var t=[];for(var r in this.items)this.items&&t.push(r);return t})),r.prototype.__defineGetter__("numberOfItems",(function(){return Object.keys(this.items).length})),r.prototype.__defineGetter__("isEmpty",(function(){return 0==this.numberOfItems})),r.prototype.__defineGetter__("pSum",(function(){var t=0;for(var r in this.items)t+=this.items[r];return t})),r.prototype.__defineSetter__("pSum",(function(t){var r=t/this.pSum;if(NaN!=r)for(var e in this.items)this.items[e]*=r;else console.log("Tried to set pSum of empty WeightedSet",this)})),r.prototype.roll=function(){var t=Math.random()*this.pSum;for(var r in this.items)if((t-=this.items[r])<=0)return parseFloat(r)==r&&(r=parseFloat(r)),r},r.prototype.rollUnweighted=function(){var t=Object.keys(this.items);return t[Math.floor(Math.random()*t.length)]},r.prototype.sortRoll=function(){for(var t=this.pSum,r=new Array,e=Object.keys(this.items).length,n=0;n<e;n++){var o=Math.random()*t;for(var i in this.items)if(-1==r.indexOf(i)&&(o-=this.items[i])<=0){r[n]=i,t-=this.items[i];break}}return r},r.prototype.mapWeights=function(t,e){var n=new r;for(var o in this.items){var i=t(o,this.items[o]);(0!=i||e)&&n.increment(o,i)}return n},t.exports=r},448:(t,r,e)=>{var n=e(734);function o(t){n.call(this),this.root,this.color,this.bass,null!=t&&t.constructor==o?(this.root=t.root,this.color=t.color,this.bass=t.bass):null!=t&&t.constructor==String&&(this.print=t)}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.isChord=o,t.exports=o,o.random=function(){var t=new o;t.root=Math.floor(12*Math.random());var r=Object.keys(o.prototype.colorRef);return t.color=r[Math.floor(Math.random()*r.length)],t};var i=e(890),s=e(42);o.prototype.colorRef={"":[0,4,7],6:[0,4,7,9],7:[0,4,7,10],maj7:[0,4,7,11],9:[0,4,7,10,14],"7b9":[0,4,7,10,11],13:[0,4,7,10,14,17,21],m:[0,3,7],m7:[0,3,7,10],o:[0,3,6],o7:[0,3,6,9],hd7:[0,3,6,10],"+":[0,4,8],"+7":[0,4,8,10]},o.prototype.__defineGetter__("third",(function(){var t=this.colorProfile[1];if(t>=2.5&&t<=4.5)return i.pc(t+this.root)})),o.allChords=function(){var t=[];for(var r in o.prototype.colorRef)for(var e=0;e<12;e++){var n=new o;n.root=e,n.color=r,t.push(n)}return t},o.allChordsInAllInversions=function(){var t=o.allChords(),r=[];for(var e in t)for(var n=t[e],i=n.octaveProfile,s=0;s<i.length;s++){var l=new o(n);l.inversion=s,r.push(l)}return r},o.fromOctaveProfile=function(t,r){null==r&&(r=0);var e=o.allChords(),n=[];for(var i in e){var s=0,l=e[i].octaveProfile;for(var f in t)-1!=l.indexOf(t[f])&&s++;var a=t.length-s;l.length,a<=r&&n.push(e[i])}if(0==n.length)return null;var u=n[0],c=n[0].octaveProfile.length;for(i=1;i<n.length;i++){var h=n[i].octaveProfile.length;h<c&&(u=n[i],c=h)}return u},o.parseChord=function(t,r){if(null!=t)return t.constructor==o?new o(t):t.constructor==String?(-1!=t.indexOf(": ")&&(t=t.split(": "),r=new s(t[0]),t=t[1]),null!=r?(r.constructor==String&&(r=new s(r)),o.numeralOrJazz(t)?r.numeralToChord(t):t=new o(t)):new o(t)):void 0},o.numeralOrJazz=function(t){return!t.charAt(0).match(/[A-G]/)||(":"==t.charAt(1)&&console.log("someone put a scale in here :Z"),!1)},o.prototype.__defineGetter__("inversion",(function(){if(null==this.bass)return 0;for(var t=i.pc(this.bass-this.root),r=this.colorProfile,e=0;e<r.length;e++)if(i.pc(r[e])==t)return e;console.log("couldn't identify inversion:(",this)})),o.prototype.__defineSetter__("inversion",(function(t){if(null!=t){var r=this.octaveProfile;this.bass=r[t%r.length]}else this.bass=void 0})),o.prototype.__defineGetter__("bassPc",(function(){return i.pc(this.bass||this.root)})),o.prototype.__defineGetter__("print",(function(){var t=i.printPitchClass(this.root)+this.color;return null!=this.bass&&this.bass!=this.root&&(t+="/"+i.printPitchClass(this.bass)),t})),o.prototype.__defineSetter__("print",(function(t){if("b"==t.charAt(1)||"#"==t.charAt(1))var r=t.slice(0,2);else r=t.charAt(0);return this.root=i.parsePitchClass(r),t=(t=t.slice(r.length)).split("/"),this.color=t[0],t[1]?this.bass=i.parsePitchClass(t[1]):this.bass=void 0,this})),o.prototype.randomise=function(){this.root=Math.floor(12*Math.random());var t=Object.keys(o.prototype.colorRef);return this.color=t[Math.floor(Math.random()*t.length)],this}},414:(t,r)=>{r.pack=function(t){var r=t.accidental||0;-1==t.accidental?r="b":1==t.accidental?r="#":0==t.accidental&&(r="");var e=t.degree%numes.length;e<0&&(e+=numes.length),e=numes[e];var n=t.color||"";"m"==n[0]&&(e=e.toLowerCase(),n=n.slice(1));var o=String.fromCharCode(97+(t.inversion||0));return"a"==o&&(o=""),r+e+n+o},r.parse=function(t){var r;"b"==t[0]?(r=-1,t=t.slice(1)):"#"==t[0]?(r=1,t=t.slice(1)):r=0;var e=t.match(/[VvIi]*/)[0],n=e==e.toLowerCase();if((t=t.slice(e.length)).length>0&&t[t.length-1].match(/[a-i]/)){var o=t.charCodeAt(t.length-1)-97;t=t.slice(0,t.length-1)}else o=0;var i,s=t;return n&&(s="m"+s),""!=e&&(i=numes.indexOf(e.toUpperCase())),{degree:i,accidental:r,inversion:o,color:s}},numes=["I","II","III","IV","V","VI","VII"]},890:(t,r)=>{function e(t){for(;t>=12;)t-=12;for(;t<0;)t+=12;return t}function n(t){return t.constructor==String&&(t=parseFloat(t)),(t%=12)<0&&(t+=12),pitchClassNames[t]}function o(t){var r,e=t.charAt(0);e=e.toUpperCase(),r="#"==t.charAt(1)?1:"b"==t.charAt(1)?-1:0;var n=pitchClassNames.indexOf(e);return(n+=r)>=12&&(n-=12),n<0&&(n+=12),n}function i(t){var r=t.match(/-?\d+/);if(r){var e=t.slice(0,r.index);if(/^[A-Ga-g]b?#?$/.test(e))return parseFloat(r[0])}}pitchClassNames=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r.pc=e,r.octave=function(t,r=12){return Math.floor(t/r)},r.pToF=function(t){return 440*Math.pow(2,(t-69)/12)},r.fToP=function(t,r){return 12*Math.log(t/440)/Math.log(2)+69},r.printPitchClass=n,r.printPitch=function(t){var r=(t-e(t))/12;return n(t)+r},r.parsePitchClass=o,r.parseOctave=i,r.parsePitch=function(t){return t&&t.constructor==Number?t:o(t)+12*(i(t)||0)}},862:(t,r,e)=>{t.exports={toArabic:e(993),toRoman:e(24)}},993:t=>{Array.prototype.forEach,t.exports=function(t){if("string"!=typeof t&&!(t instanceof String))throw new TypeError("toArabic expects a string");if(/^nulla$/i.test(t)||!t.length)return 0;if(!(t=t.toUpperCase().match(/^(M{0,3})(CM|DC{0,3}|CD|C{0,3})(XC|LX{0,3}|XL|X{0,3})(IX|VI{0,3}|IV|I{0,3})$/)))throw new Error("toArabic expects a valid roman number");var r=0;return r+=1e3*t[1].length,"CM"===t[2]?r+=900:"CD"===t[2]?r+=400:r+=100*t[2].length+("D"===t[2][0]?400:0),"XC"===t[3]?r+=90:"XL"===t[3]?r+=40:r+=10*t[3].length+("L"===t[3][0]?40:0),"IX"===t[4]?r+=9:"IV"===t[4]?r+=4:r+=1*t[4].length+("V"===t[4][0]?4:0),r}},24:t=>{!function(){function r(t,r,e,n){var o="";switch(t){case 0:return o;case 9:return r+n;case 4:return r+e}for(t>=5&&(o=e,t-=5);t-- >0;)o+=r;return o}t.exports=function(t){if(t instanceof Number&&(t=parseInt(t,10)),("string"==typeof t||t instanceof String)&&(t=parseInt(t,10),isNaN(t)))throw new TypeError("toArabic expects a number");if("number"!=typeof t)throw new TypeError("toArabic expects a number");if(isNaN(t))throw new TypeError("toArabic expects a real number");if(t<0)throw new Error("toArabic cannot express negative numbers");if(t>3999)throw new Error("toArabic cannot express numbers over 3999");if(0===t)return"nulla";var e="";return e+=r(Math.floor(t/1e3),"M","",""),t%=1e3,e+=r(Math.floor(t/100),"C","D","M"),t%=100,(e+=r(Math.floor(t/10),"X","L","C"))+r(t%=10,"I","V","X")}}()},924:(t,r,e)=>{const{standardEADGBE:n}=e(994);class o{constructor({fingers:t,openStrings:r=[]}){this.fingers=t,this.openStrings=r}duplicate(){return new o({fingers:this.fingers.map((({fret:t,string:r})=>({fret:t,string:r}))),openStrings:this.openStrings.slice()})}static empty(t=4){let r=[];for(let e=0;e<t;e++)r.push({fret:null,string:null});return new o({fingers:r,openStrings:[]})}static compare(t,r){if(t.fingers.length!=r.fingers.length)return!1;for(let e=0;e<t.fingers.length;e++){if(t.fingers[e].fret!=r.fingers[e].fret)return!1;if(t.fingers[e].string!=r.fingers[e].string)return!1}if(t.openStrings.length!=r.openStrings.length)return!1;for(let e in t.openStrings)if(t.openStrings[e]!=r.openStrings[e])return!1;return!0}liftFinger(t){let r=this.duplicate();return r.fingers[t]={fret:null,string:null},r}moveFinger(t,{fret:r,string:e}){let n=this.duplicate();return n.fingers[t]={fret:r,string:e},n}get empty(){for(let{fret:t}of this.fingers)if(null!=t)return!1;return!0}get lowestFrettedFinger(){for(let t=0;t<this.fingers.length;t++)if(null!=this.fingers[t].fret)return t;return null}get highestFrettedFinger(){for(let t=this.fingers.length-1;t>=0;t--)if(null!=this.fingers[t].fret)return t;return null}get lowestFret(){let t=this.lowestFrettedFinger;return null!=t?this.fingers[t].fret:null}get highestFret(){let t=this.highestFrettedFinger;return null!=t?this.fingers[t].fret:null}get playingPosition(){let t=this.lowestFrettedFinger,r=this.lowestFret;return null==r||null==t?null:r}get width(){let t=this.lowestFret,r=this.highestFret;return null!=t&&null!=r?r-t:null}get liftedFingerNumbers(){let t=[];for(let r=0;r<this.fingers.length;r++)null==this.fingers[r].fret&&t.push(r);return t}get placedFingerNumbers(){let t=[];for(let r=0;r<this.fingers.length;r++)null!=this.fingers[r].fret&&t.push(r);return t}get numberOfEngagedFingers(){return this.placedFingerNumbers.length}getEngagedStrings(t=6){let r=this.fretsByString(t),e=[];for(let t=0;t<r.length;t++)null!=r[t]&&e.push(t);return e}fretsByString(t=6){let r=new Array(t).fill(null);for(let t of this.openStrings)r[t]=0;for(let{fret:t,string:e}of this.fingers)null!=t&&(!r[e]||t>r[e])&&(r[e]=t);return r}fretsAndFingersByString(t=6){let r=new Array(t).fill(null);for(let t of this.openStrings)r[t]={fret:0,fingerNumber:null};for(let t=0;t<this.fingers.length;t++){let e=this.fingers[t],{fret:n,string:o}=e;null!=n&&(!r[o]||n>r[o].fret)&&(r[o]={fret:n,fingerNumber:t})}return r}lilypondFretDiagram(t=6){let r=[];for(let t=0;t<this.fingers.length;t++){let e=this.fingers[t],{fret:n,string:o}=e;null!=n&&(!r[o]||n>r[o].fret)&&(r[e.string]={fret:n,fingerNumber:t})}for(let e=0;e<t;e++)r[e]?r[e]=r[e].fret+"-"+(r[e].fingerNumber+1):this.openStrings.includes(e)?r[e]="o":r[e]="x";return'\\markup { \\fret-diagram-terse #"'+r.join(";")+';" }'}pitches(t=n){let r=[],e=this.fretsAndFingersByString(t.length);for(let n in e)e[n]&&r.push({p:e[n].fret+t[n],finger:null==e[n].fingerNumber?-1:e[n].fingerNumber,string:n});return r.sort(((t,r)=>r.p-t.p))}}t.exports=o},765:t=>{t.exports=function*(t){let r=t.placedFingerNumbers,e=Math.pow(2,r.length);for(let n=0;n<e;n++){let e=n,o=t.duplicate();for(let t of r)e%2==1&&(o=o.liftFinger(t)),e=(e-e%2)/2;yield o}}},113:t=>{function r(t,{maxFingerStretch:r=2,minFingerStretch:e=0,maxHandStretch:n=3,littleFingerRule:o=!0,forbidStringSharing:i=!0}={}){let s=t.width;if(s>n||s<0)return!1;for(let n=1;n<t.fingers.length;n++){let o=t.fingers[n-1].fret,i=t.fingers[n].fret,s=i-o;if(null!=o&&null!=i&&(s<e||s>r))return!1}if(!i){let r=[];for(let{string:e}of t.fingers)if(null!=e){if(r[e])return!1;r[e]=!0}}if(o){let r,e=t.fingers[t.fingers.length-1];for(let e=t.fingers.length-2;e>=0;e--)if(t.fingers[e].fret){r=t.fingers[e];break}if(r&&e.fret==r.fret&&e.string<=r.string)return!1}return!0}t.exports=r,t.exports.intermediary=function(t,e){let n={};return Object.assign(n,e,{forbidStringSharing:!1}),r(t,n)}},74:(t,r,e)=>{const n=e(448),o=e(262),{standardEADGBE:i}=e(994);function s(t,r=i){let e=t.fretsByString(),n=[];for(let t in e)null!=e[t]&&null!=r[t]&&n.push(e[t]+r[t]);return n}function l(t,r=i){let e=s(t,r),n=[];for(let t of e){let r=o.pc(t);n.includes(r)||n.push(r)}return n.sort(((t,r)=>t-r))}t.exports={getPitchSet:s,getPitchClassSet:l,getChord:function(t,r=i){let e=l(t,r);return n.fromOctaveProfile(e)},compareToChord:function(t,r,e=i){t.constructor==String&&(t=new n(t));let o=l(r,e),s=t.octaveProfile;for(let t of o)if(!s.includes(t))return!1;return!0}}},550:t=>{t.exports.cycle=function*(...t){let r=1;for(let e of t)r*=e.length;for(let e=0;e<r;e++){let r=e,n=[];for(let e of t)n.push(e[r%e.length]),r=(r-r%e.length)/e.length;yield n}},t.exports.random=function(...t){let r=[];for(let e of t)r.push(e[Math.floor(Math.random()*e.length)]);return r}},44:(t,r,e)=>{t.exports={HandPosition:e(924),randomHandPosition:e(474),step:e(864),slide:e(645),stepAndSlide:e(722)}},961:(t,r,e)=>{const n=e(262),{standardEADGBE:o}=e(994),{getChord:i}=e(74),s=e(862).toRoman,l=["c","des","d","ees","e","f","ges","g","aes","a","bes","b"],f=["c","cis","d","dis","e","f","fis","g","gis","a","ais","b"];function a(t,r="flat"){let e,o=n.pc(t),i=n.octave(t)-4;return"flat"==r?e=l[o]:"sharp"==r&&(e=f[o]),0==i?e:i>0?e+"'".repeat(i):i<0?e+",".repeat(-i):void 0}function u({p:t,finger:r},e){return e?a(t)+e.toString()+" -"+(r+1):a(t)+" -"+(r+1)}function c(t,r){return t.constructor==Array?"<"+t.map((t=>u(t))).join(" ")+">"+r:u(t,r)}function h(t,r=o,e=!0){let n=t.fretsAndFingersByString(r.length);for(let t=0;t<n.length;t++)n[t]&&(n[t].pitch=r[t]+n[t].fret);n=n.filter((t=>t));let i=n.map((({pitch:t,fingerNumber:r})=>{let n=a(t);return e&&(n+="-"+(null!=r?r+1:"0")),n}));return i.length?"< "+i.join(" ")+" >":"r"}function p(...t){return g(...t.map((t=>m(t))))}function g(...t){return['\\version "2.18.2"',"\\score {","<<",...t,">>","\\layout {}","\\midi {}","}"].join("\n")}function m(t,{tab:r=!1}={}){return r?["\\new TabStaff {","\\override TextScript.size = #'1.5","\\override TextScript.fret-diagram-details.finger-code = #'in-dot","\\absolute {",t,"}}"].join("\n"):["\\new Voice {","\\override TextScript.size = #'1.5","\\override TextScript.fret-diagram-details.finger-code = #'in-dot","\\absolute {",'\t\\clef "treble_8"',t,"}}"].join("\n")}t.exports={pitch:a,handPosition:h,sheet:function(t,r=o){let e=[];for(let n of t){let t=h(n,r)+"1";t+="^"+n.lilypondFretDiagram();let o=i(n,r);o&&(t+='^"'+o.print+'"'),e.push(t,'\\bar "||"')}return p(e.join("\n"))},fingeredPitch:u,note:c,sequence:function(t,r="8"){return t.map((t=>c(t,r)))},wrap:p,sheetWithBlanks:function(t,r=o){let e=[],n=0,s=0;for(let o of t){let t=h(o,r)+"1",l=i(o,r);l&&(t+='^"'+l.print+'"'),++n>=4&&(t+="\n\\break\n",n=0,++s>=4&&(t+="\n\\pageBreak\n",s=0)),e.push(t)}let l=e.map((()=>"s1"));return p(e.join("\n"),l.join("\n"))},pabloSheet:function(t,r=o,{diagrams:e=!0,noteValue:n=1,blankStave:l=!1,tab:f=!1,strum:a=!1}={}){let u=[],c=[],p=0,d=0,v=null;for(let o=0;o<t.length;o++){let l=t[o],g=h(l,r)+n;f&&(g="\\set TabStaff.minimumFret = #"+l.playingPosition+"\n"+g),a&&(g+="\\arpeggio"),e&&(g+="^"+l.lilypondFretDiagram(r.length));let m=l.playingPosition;m&&l.fingers[0].fret&&(v&&v.playingPosition==m||(g="\n\\override TextSpanner.bound-details.left.text = \\markup { \\bold "+s(m)+" }\n"+g,g+=" \\startTextSpan")),t[o+1]&&t[o+1].playingPosition==m||(g+=" \\stopTextSpan"),i(l,r),p+=1/n,p>=4&&(g+="\n\\break\n",p=0,++d>=4&&(g+="\n\\pageBreak\n",d=0)),u.push(g),c.push("s"+n),v=l}let y=[m(u.join("\n"))];return f&&y.push(m(u.join("\n"),{tab:!0})),l&&y.push(m(c.join("\n"))),g(...y)}}},503:(t,r,e)=>{const n=e(924),{getHighestFrettedFinger:o,getLowestFrettedFinger:i}=e(121),s=e(113);function l(t,r,e={}){if(!(t instanceof n))throw"getReachableFingerPositions expects a HandPosition";let o=f(t,r,e),{numberOfStrings:i=6}=e,l=t.duplicate(),a=[];for(let t=0;t<i;t++)for(let n of o)l.fingers[r]={fret:n,string:t},s.intermediary(l,e)&&a.push({fret:n,string:t});return a}function f(t,r,{numberOfFingers:e=4,minFingerStretch:s=0,maxFingerStretch:l=2,maxHandStretch:f=3,numberOfStrings:a=6,numberOfFrets:u=12}={}){if(!(t instanceof n))throw"getReachableFrets expects a HandPosition";const{fingers:c}=t;let h=null,p=null;for(let t=r-1;t>=0;t--)if(null!=c[t].fret){p=c[t].fret,h=t;break}let g=null,m=null;for(let t=r+1;t<c.length;t++)if(null!=c[t].fret){g=t,m=c[t].fret;break}let d=1,v=u;null!=p&&(d=Math.max(d,p),v=Math.min(v,p+l*(r-h))),null!=m&&(v=Math.min(v,m),d=Math.max(d,m-l*(g-r)));let y=i(t),b=o(t);y&&y!=c[r]&&(v=Math.min(v,y.fret+f)),b&&b!=c[r]&&(d=Math.max(d,b.fret-f));let S=[];for(let t=d;t<=v;t++)S.push(t);return S}t.exports.singleFingerMoves=function(t,r){let e=[];for(let n=0;n<t.fingers.length;n++){let o=l(t,n,r);for(let r of o)e.push(t.moveFinger(n,r))}return e},t.exports.getMovesForFinger=function(t,r,e={}){let n=t.fingers[r];return null==t.fingers[r].fret?[{fret:null,string:null},...l(t,r,e)]:t.fingers?[{fret:n.fret,string:n.string},{fret:null,string:null}]:void 0},t.exports.getReachableFingerPositions=l,t.exports.getReachableFrets=f},262:(t,r)=>{function e(t){for(;t>=12;)t-=12;for(;t<0;)t+=12;return t}function n(t){return t.constructor==String&&(t=parseFloat(t)),(t%=12)<0&&(t+=12),pitchClassNames[t]}function o(t){var r,e=t.charAt(0);e=e.toUpperCase(),r="#"==t.charAt(1)?1:"b"==t.charAt(1)?-1:0;var n=pitchClassNames.indexOf(e);return(n+=r)>=12&&(n-=12),n<0&&(n+=12),n}function i(t){var r=t.match(/-?\d+/);if(r){var e=t.slice(0,r.index);if(/^[A-Ga-g]b?#?$/.test(e))return parseFloat(r[0])}}pitchClassNames=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r.pc=e,r.octave=function(t,r=12){return Math.floor(t/r)},r.pToF=function(t){return 440*Math.pow(2,(t-69)/12)},r.fToP=function(t,r){return 12*Math.log(t/440)/Math.log(2)+69},r.printPitchClass=n,r.printPitch=function(t){var r=(t-e(t))/12;return n(t)+r},r.parsePitchClass=o,r.parseOctave=i,r.parsePitch=function(t){return t&&t.constructor==Number?t:o(t)+12*(i(t)||0)}},474:(t,r,e)=>{const n=e(924);e(961),e(262),t.exports=function({numberOfFingers:t=4,minFingerStretch:r=0,maxFingerStretch:e=2,maxHandStretch:o=2,numberOfStrings:i=6,numberOfFrets:s=12,pOmitFinger:l=.1,pOpenString:f=.5}={}){let a,u;do{a=[],u=0;for(let n=1;n<t;n++){let t=r+Math.floor(Math.random()*(e-r+1));a.push(t),u+=t}}while(u>o);let c=[];for(let r=0;r<t;r++)c[r]={};let h=Math.floor(Math.random()*(s-u-1))+1;c[0].fret=h;for(let t=0;t<a.length;t++){let r=a[t];c[t+1].fret=c[t].fret+r}let p=[];for(let t=0;t<i;t++)p.push(t);p=p.sort((()=>2*Math.random()-1));for(let t of c)Math.random()<l?(t.string=null,t.fret=null):t.string=p.pop();let g=p.filter((()=>Math.random()<f)).sort(((t,r)=>t-r));return new n({fingers:c,openStrings:g})}},121:t=>{t.exports={getLowestFrettedFinger:function({fingers:t}){for(let r of t)if(null!=r.fret)return r},getHighestFrettedFinger:function({fingers:t}){for(let r=t.length-1;r>=0;r--)if(null!=t[r].fret)return t[r]},getLowestFret:function({fingers:t}){for(let{fret:r}of t)if(null!=r)return r},getHighestFret:function({fingers:t}){for(let r=finger.length-1;r>=0;r--)if(null!=t[r].fret)return t[r].fret}}},645:(t,r,e)=>{const n=e(113),o=e(924),{cycle:i}=e(550);function*s(t,r={}){let{minFingerStretch:e=0,maxFingerStretch:s=2,maxHandStretch:f=2,numberOfFrets:a=12}=r,u=t.fingers.length,c=[];for(let r=0;r<u;r++)t.fingers[r].fret&&c.push(r);if(0==c.length)return void(yield o.empty(u));let h=[l(1,a)];for(let t=1;t<c.length;t++){let r=c[t]-c[t-1],n=e*r,o=s*r;h[t]=l(n,o)}for(let e of i(...h)){let i=o.empty(u),s=0;for(let r in e){let n=c[r];s+=e[r],i.fingers[n]={fret:s,string:t.fingers[n].string}}n(i,r)&&(yield i)}}function l(t,r){let e=[];for(let n=t;n<=r;n++)e.push(n);return e}t.exports.check=function(t,r,e){if(!n(t,e)||!n(r,e))return!1;for(let e in t.fingers)if(t.fingers[e].string!=r.fingers[e].string)return!1;return!0},t.exports.all=s,t.exports.list=function(t,r){return[...s(t,r)]},t.exports.random=function t(r,e={}){let{minFingerStretch:i=0,maxFingerStretch:s=2,maxHandStretch:l=2,numberOfFrets:f=12}=e,a=null,u=o.empty(r.fingers.length);for(let t=0;t<r.fingers.length;t++)null!=r.fingers[t].fret&&(a?(a+=i+Math.floor(Math.random()*(s-i+1)),u.fingers[t]={fret:a,string:r.fingers[t].string}):(a=Math.floor(Math.random()*(f-1)+1),u.fingers[t]={fret:a,string:r.fingers[t].string}));return n(u,e)?u:t(r,e)}},864:(t,r,e)=>{const n=e(924),{getMovesForFinger:o}=(e(765),e(503)),i=e(550),s=e(113);t.exports.all=function*(t,r){let e=[],l=1;for(let n=0;n<t.fingers.length;n++)e[n]=o(t,n,r),l*=e[n].length;for(let t of i.cycle(...e)){let r=new n({fingers:t});s(r)&&(yield r.duplicate())}},t.exports.random=function(t,r){let e,l=[],f=1;for(let e=0;e<t.fingers.length;e++)l[e]=o(t,e,r),f*=l[e].length;do{e=new n({fingers:i.random(...l)})}while(!s(e,r));return e.duplicate()}},722:(t,r,e)=>{const n=e(864),o=e(645),i=e(924);t.exports.random=function(t,r){return o.random(n.random(t,r),r)},t.exports.all=function*(t,r){let e=[];for(let s of n.all(t,r)){let t=!0;for(let n of o.all(s,r)){if(t){if(e.some((t=>i.compare(t,n))))break;e.push(n),t=!1}yield n}}}},994:t=>{t.exports={standardEADGBE:[40,45,50,55,59,64]}}},r={},function e(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return t[n](i,i.exports,e),i.exports}(44);var t,r}));